{
  "resourceType": "Bundle",
  "type": "transaction",
  "entry": [
    {
      "fullUrl": "urn:uuid:8a47c24a-a916-421f-a32e-3817aa3445d9",
      "request": {
        "method": "POST",
        "url": "Binary"
      },
      "resource": {
        "resourceType": "Binary",
        "contentType": "text/typescript",
        "data": "aW1wb3J0IHsgQm90RXZlbnQsIE1lZHBsdW1DbGllbnQgfSBmcm9tICdAbWVkcGx1bS9jb3JlJzsKaW1wb3J0IHsgTWVkaWEsIFJlc291cmNlLCBRdWVzdGlvbm5haXJlLCBRdWVzdGlvbm5haXJlUmVzcG9uc2UgfSBmcm9tICdAbWVkcGx1bS9maGlydHlwZXMnOwppbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXInOwoKLyoqCiAqIEEgTWVkcGx1bSBCb3QgdGhhdCBwcm9jZXNzZXMgZG9jdW1lbnRzIHVzaW5nIHRoZSBsYW5nMmZoaXIgQVBJLgogKiAKICogRXhhbXBsZSBpbnB1dDoKICogewogKiAgICJtZWRpYSI6IHsKICogICAgICJjb250ZW50IjogewogKiAgICAgICAidXJsIjogImh0dHBzOi8vZXhhbXBsZS5jb20vZG9jdW1lbnQucGRmIiwKICogICAgICAgImNvbnRlbnRUeXBlIjogImFwcGxpY2F0aW9uL3BkZiIKICogICAgIH0KICogICB9LAogKiAgICJyZXNvdXJjZVR5cGUiOiAiUXVlc3Rpb25uYWlyZSIKICogfQogKiAKICogVGhlIGJvdCB3aWxsOgogKiAxLiBEb3dubG9hZCB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgcHJvdmlkZWQgVVJMCiAqIDIuIFNlbmQgdGhlIGRvY3VtZW50IHRvIHRoZSBsYW5nMmZoaXIgQVBJCiAqIDMuIENyZWF0ZSBhIEZISVIgcmVzb3VyY2Ugb2YgdGhlIHR5cGUgc3BlY2lmaWVkIGluIHRoZSBpbnB1dAogKiAKICogUmVxdWlyZWQgYm90IHNlY3JldHM6IChZb3UgbmVlZCB0byBoYXZlIGFuIGFjdGl2ZSBQaGVub01MIHN1YnNjcmlwdGlvbiB0byB1c2UgdGhpcyBib3QpCiAqIC0gUEhFTk9NTF9FTUFJTDogWW91ciBQaGVub01MIEFQSSBlbWFpbAogKiAtIFBIRU5PTUxfUEFTU1dPUkQ6IFlvdXIgUGhlbm9NTCBBUEkgcGFzc3dvcmQKICovCgppbnRlcmZhY2UgRG9jdW1lbnRSZXF1ZXN0IHsKICB2ZXJzaW9uOiBzdHJpbmc7CiAgcmVzb3VyY2U6IHN0cmluZzsKICBjb250ZW50OiBzdHJpbmc7CiAgZmlsZVR5cGU6IHN0cmluZzsKfQoKaW50ZXJmYWNlIERvY0JvdElucHV0IHsKICBtZWRpYTogTWVkaWE7CiAgcmVzb3VyY2VUeXBlOiAnUXVlc3Rpb25uYWlyZScgfCAnUXVlc3Rpb25uYWlyZVJlc3BvbnNlJzsKfQoKY29uc3QgUEhFTk9NTF9BUElfVVJMID0gImh0dHBzOi8vZXhwZXJpbWVudC5waGVuby5tbCI7CgoKZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoCiAgbWVkcGx1bTogTWVkcGx1bUNsaWVudCwgCiAgZXZlbnQ6IEJvdEV2ZW50PERvY0JvdElucHV0PgopOiBQcm9taXNlPFJlc291cmNlPiB7CiAgdHJ5IHsKICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBib3QgZXhlY3V0aW9uIHdpdGggZXZlbnQ6JywgSlNPTi5zdHJpbmdpZnkoZXZlbnQsIG51bGwsIDIpKTsKCiAgICBjb25zdCBpbnB1dE1lZGlhID0gZXZlbnQuaW5wdXQubWVkaWE7CiAgICBjb25zdCBpbnB1dFJlc291cmNlVHlwZSA9IGV2ZW50LmlucHV0LnJlc291cmNlVHlwZTsKICAgIAogICAgaWYgKCFpbnB1dE1lZGlhKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWVkaWEgaW5wdXQgcHJvdmlkZWQgdG8gYm90Jyk7CiAgICB9CiAgICBpZiAoIWlucHV0UmVzb3VyY2VUeXBlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdGFyZ2V0IHJlc291cmNlIHR5cGUgcHJvdmlkZWQnKTsKICAgIH0KCiAgICBpZiAoIVsnUXVlc3Rpb25uYWlyZScsICdRdWVzdGlvbm5haXJlUmVzcG9uc2UnXS5pbmNsdWRlcyhpbnB1dFJlc291cmNlVHlwZSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCByZXNvdXJjZSB0eXBlOiAke2lucHV0UmVzb3VyY2VUeXBlfWApOwogICAgfQoKICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIE1lZGlhIHJlc291cmNlOicsIEpTT04uc3RyaW5naWZ5KGlucHV0TWVkaWEsIG51bGwsIDIpKTsKICAgIAogICAgaWYgKCFpbnB1dE1lZGlhLmNvbnRlbnQ/LnVybCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lZGlhIHJlc291cmNlIG11c3QgaGF2ZSBjb250ZW50LnVybCcpOwogICAgfQoKICAgIGNvbnN0IHRhcmdldFJlc291cmNlVHlwZSA9IGlucHV0UmVzb3VyY2VUeXBlLnRvTG93ZXJDYXNlKCk7CgogICAgLy8gRG93bmxvYWQgdGhlIGZpbGUgY29udGVudCBmcm9tIHRoZSBwcmUtc2lnbmVkIFVSTAogICAgY29uc29sZS5sb2coJ0Rvd25sb2FkaW5nIGZpbGUgZnJvbTonLCBpbnB1dE1lZGlhLmNvbnRlbnQudXJsKTsKICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBtZWRwbHVtLmRvd25sb2FkKGlucHV0TWVkaWEuY29udGVudC51cmwpOwogICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICBjb25zdCBjb250ZW50ID0gQnVmZmVyLmZyb20oYXJyYXlCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKTsKCiAgICBjb25zdCBlbWFpbCA9IGV2ZW50LnNlY3JldHNbIlBIRU5PTUxfRU1BSUwiXS52YWx1ZVN0cmluZyBhcyBzdHJpbmc7CiAgICBjb25zdCBwYXNzd29yZCA9IGV2ZW50LnNlY3JldHNbIlBIRU5PTUxfUEFTU1dPUkQiXS52YWx1ZVN0cmluZyBhcyBzdHJpbmc7CgogICAgLy8gQ3JlYXRlIGJhc2U2NCBlbmNvZGVkIGNyZWRlbnRpYWxzIGZvciBCYXNpYyBBdXRoCiAgICBjb25zdCBjcmVkZW50aWFscyA9IEJ1ZmZlci5mcm9tKGAke2VtYWlsfToke3Bhc3N3b3JkfWApLnRvU3RyaW5nKCdiYXNlNjQnKTsKCiAgICBjb25zb2xlLmxvZygnQXV0aGVudGljYXRpb24gd2l0aCBQaGVub01MIEFQSS4uLicpOwogICAgLy8gR2V0IGF1dGggdG9rZW4gdXNpbmcgQmFzaWMgQXV0aAogICAgY29uc3QgYXV0aFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goUEhFTk9NTF9BUElfVVJMICsgJy9hdXRoL3Rva2VuJywgewogICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgaGVhZGVyczogeyAKICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICdBdXRob3JpemF0aW9uJzogYEJhc2ljICR7Y3JlZGVudGlhbHN9YAogICAgICB9LAogICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjb25uZWN0IHRvIFBoZW5vTUwgQVBJOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICB9KTsgCiAgICAKICAgIGNvbnNvbGUubG9nKCdBdXRoIHJlc3BvbnNlIHN0YXR1czonLCBhdXRoUmVzcG9uc2Uuc3RhdHVzKTsKICAgIGlmICghYXV0aFJlc3BvbnNlLm9rKSB7CiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IGF1dGhSZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ05vIGVycm9yIGRldGFpbHMgYXZhaWxhYmxlJyk7CiAgICAgIHRocm93IG5ldyBFcnJvcihgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2F1dGhSZXNwb25zZS5zdGF0dXN9ICR7YXV0aFJlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvclRleHR9YCk7CiAgICB9CgogICAgY29uc3QgYXV0aERhdGEgPSBhd2FpdCBhdXRoUmVzcG9uc2UuanNvbigpLmNhdGNoKGVycm9yID0+IHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgYXV0aGVudGljYXRpb24gcmVzcG9uc2U6ICR7ZXJyb3IubWVzc2FnZX1gKTsKICAgIH0pIGFzIHsgdG9rZW46IHN0cmluZyB9OwogICAgCiAgICBjb25zdCBiZWFyZXJUb2tlbiA9IGF1dGhEYXRhLnRva2VuIGFzIHN0cmluZzsKICAgIGlmICghYmVhcmVyVG9rZW4pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0b2tlbiByZWNlaXZlZCBmcm9tIGF1dGggcmVzcG9uc2UnKTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGF1dGhlbnRpY2F0ZWQgd2l0aCBQaGVub01MIEFQSScpOwogICAgCiAgICAvLyBQcmVwYXJlIGRvY3VtZW50IHJlcXVlc3QKICAgIGNvbnN0IGRvY3VtZW50UmVxdWVzdDogRG9jdW1lbnRSZXF1ZXN0ID0gewogICAgICB2ZXJzaW9uOiAnUjQnLCAvLyBGSElSIFI0CiAgICAgIHJlc291cmNlOiB0YXJnZXRSZXNvdXJjZVR5cGUsCiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsCiAgICAgIGZpbGVUeXBlOiBpbnB1dE1lZGlhLmNvbnRlbnQuY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL3BkZicKICAgIH07CgogICAgLy8gQ2FsbCBsYW5nMmZoaXIvZG9jdW1lbnQgZW5kcG9pbnQKICAgIGNvbnN0IGRvY3VtZW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChQSEVOT01MX0FQSV9VUkwgKyAnL2xhbmcyZmhpci9kb2N1bWVudCcsIHsKICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRvY3VtZW50UmVxdWVzdCksIAogICAgICBoZWFkZXJzOiB7IAogICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2JlYXJlclRva2VufWAsCiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgIH0sCiAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNvbm5lY3QgdG8gUGhlbm9NTCBkb2N1bWVudCBBUEk6ICR7ZXJyb3IubWVzc2FnZX1gKTsKICAgIH0pOwoKICAgIGNvbnNvbGUubG9nKCdEb2N1bWVudCBBUEkgcmVzcG9uc2Ugc3RhdHVzOicsIGRvY3VtZW50UmVzcG9uc2Uuc3RhdHVzKTsKICAgIGlmICghZG9jdW1lbnRSZXNwb25zZS5vaykgewogICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBkb2N1bWVudFJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnTm8gZXJyb3IgZGV0YWlscyBhdmFpbGFibGUnKTsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCBwcm9jZXNzaW5nIGZhaWxlZDogJHtkb2N1bWVudFJlc3BvbnNlLnN0YXR1c30gJHtkb2N1bWVudFJlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvclRleHR9YCk7CiAgICB9CgogICAgY29uc3QgZ2VuZXJhdGVkUmVzb3VyY2UgPSBhd2FpdCBkb2N1bWVudFJlc3BvbnNlLmpzb24oKS5jYXRjaChlcnJvciA9PiB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIGRvY3VtZW50IHJlc3BvbnNlOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICB9KTsKCiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHByb2Nlc3NlZCBkb2N1bWVudC4gUmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGVkUmVzb3VyY2UsIG51bGwsIDIpKTsKICAgIHJldHVybiBnZW5lcmF0ZWRSZXNvdXJjZSBhcyBRdWVzdGlvbm5haXJlIHwgUXVlc3Rpb25uYWlyZVJlc3BvbnNlOyAvLyAKICB9IGNhdGNoIChlcnJvcikgewogICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHdpdGggYWxsIGNvbnRleHQgcHJlc2VydmVkCiAgICB0aHJvdyBuZXcgRXJyb3IoYEJvdCBleGVjdXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTsKICB9Cn0KCg=="
      }
    },
    {
      "fullUrl": "urn:uuid:e774f040-e3b7-4885-b1cf-f7703cdf1436",
      "request": {
        "method": "POST",
        "url": "Binary"
      },
      "resource": {
        "resourceType": "Binary",
        "contentType": "text/javascript",
        "data": "InVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwpleHBvcnRzLmhhbmRsZXIgPSBoYW5kbGVyOwpjb25zdCBidWZmZXJfMSA9IHJlcXVpcmUoImJ1ZmZlciIpOwpjb25zdCBQSEVOT01MX0FQSV9VUkwgPSAiaHR0cHM6Ly9leHBlcmltZW50LnBoZW5vLm1sIjsKYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihtZWRwbHVtLCBldmVudCkgewogICAgdmFyIF9hOwogICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgYm90IGV4ZWN1dGlvbiB3aXRoIGV2ZW50OicsIEpTT04uc3RyaW5naWZ5KGV2ZW50LCBudWxsLCAyKSk7CiAgICAgICAgY29uc3QgaW5wdXRNZWRpYSA9IGV2ZW50LmlucHV0Lm1lZGlhOwogICAgICAgIGNvbnN0IGlucHV0UmVzb3VyY2VUeXBlID0gZXZlbnQuaW5wdXQucmVzb3VyY2VUeXBlOwogICAgICAgIGlmICghaW5wdXRNZWRpYSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG1lZGlhIGlucHV0IHByb3ZpZGVkIHRvIGJvdCcpOwogICAgICAgIH0KICAgICAgICBpZiAoIWlucHV0UmVzb3VyY2VUeXBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdGFyZ2V0IHJlc291cmNlIHR5cGUgcHJvdmlkZWQnKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFbJ1F1ZXN0aW9ubmFpcmUnLCAnUXVlc3Rpb25uYWlyZVJlc3BvbnNlJ10uaW5jbHVkZXMoaW5wdXRSZXNvdXJjZVR5cGUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcmVzb3VyY2UgdHlwZTogJHtpbnB1dFJlc291cmNlVHlwZX1gKTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgTWVkaWEgcmVzb3VyY2U6JywgSlNPTi5zdHJpbmdpZnkoaW5wdXRNZWRpYSwgbnVsbCwgMikpOwogICAgICAgIGlmICghKChfYSA9IGlucHV0TWVkaWEuY29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVybCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZWRpYSByZXNvdXJjZSBtdXN0IGhhdmUgY29udGVudC51cmwnKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdGFyZ2V0UmVzb3VyY2VUeXBlID0gaW5wdXRSZXNvdXJjZVR5cGUudG9Mb3dlckNhc2UoKTsKICAgICAgICAvLyBEb3dubG9hZCB0aGUgZmlsZSBjb250ZW50IGZyb20gdGhlIHByZS1zaWduZWQgVVJMCiAgICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkaW5nIGZpbGUgZnJvbTonLCBpbnB1dE1lZGlhLmNvbnRlbnQudXJsKTsKICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgbWVkcGx1bS5kb3dubG9hZChpbnB1dE1lZGlhLmNvbnRlbnQudXJsKTsKICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKTsKICAgICAgICBjb25zdCBjb250ZW50ID0gYnVmZmVyXzEuQnVmZmVyLmZyb20oYXJyYXlCdWZmZXIpLnRvU3RyaW5nKCdiYXNlNjQnKTsKICAgICAgICBjb25zdCBlbWFpbCA9IGV2ZW50LnNlY3JldHNbIlBIRU5PTUxfRU1BSUwiXS52YWx1ZVN0cmluZzsKICAgICAgICBjb25zdCBwYXNzd29yZCA9IGV2ZW50LnNlY3JldHNbIlBIRU5PTUxfUEFTU1dPUkQiXS52YWx1ZVN0cmluZzsKICAgICAgICAvLyBDcmVhdGUgYmFzZTY0IGVuY29kZWQgY3JlZGVudGlhbHMgZm9yIEJhc2ljIEF1dGgKICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IGJ1ZmZlcl8xLkJ1ZmZlci5mcm9tKGAke2VtYWlsfToke3Bhc3N3b3JkfWApLnRvU3RyaW5nKCdiYXNlNjQnKTsKICAgICAgICBjb25zb2xlLmxvZygnQXV0aGVudGljYXRpb24gd2l0aCBQaGVub01MIEFQSS4uLicpOwogICAgICAgIC8vIEdldCBhdXRoIHRva2VuIHVzaW5nIEJhc2ljIEF1dGgKICAgICAgICBjb25zdCBhdXRoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChQSEVOT01MX0FQSV9VUkwgKyAnL2F1dGgvdG9rZW4nLCB7CiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmFzaWMgJHtjcmVkZW50aWFsc31gCiAgICAgICAgICAgIH0sCiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjb25uZWN0IHRvIFBoZW5vTUwgQVBJOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coJ0F1dGggcmVzcG9uc2Ugc3RhdHVzOicsIGF1dGhSZXNwb25zZS5zdGF0dXMpOwogICAgICAgIGlmICghYXV0aFJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IGF1dGhSZXNwb25zZS50ZXh0KCkuY2F0Y2goKCkgPT4gJ05vIGVycm9yIGRldGFpbHMgYXZhaWxhYmxlJyk7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXV0aGVudGljYXRpb24gZmFpbGVkOiAke2F1dGhSZXNwb25zZS5zdGF0dXN9ICR7YXV0aFJlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvclRleHR9YCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGF1dGhEYXRhID0gYXdhaXQgYXV0aFJlc3BvbnNlLmpzb24oKS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIGF1dGhlbnRpY2F0aW9uIHJlc3BvbnNlOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgYmVhcmVyVG9rZW4gPSBhdXRoRGF0YS50b2tlbjsKICAgICAgICBpZiAoIWJlYXJlclRva2VuKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdG9rZW4gcmVjZWl2ZWQgZnJvbSBhdXRoIHJlc3BvbnNlJyk7CiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgYXV0aGVudGljYXRlZCB3aXRoIFBoZW5vTUwgQVBJJyk7CiAgICAgICAgLy8gUHJlcGFyZSBkb2N1bWVudCByZXF1ZXN0CiAgICAgICAgY29uc3QgZG9jdW1lbnRSZXF1ZXN0ID0gewogICAgICAgICAgICB2ZXJzaW9uOiAnUjQnLCAvLyBGSElSIFI0CiAgICAgICAgICAgIHJlc291cmNlOiB0YXJnZXRSZXNvdXJjZVR5cGUsCiAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsCiAgICAgICAgICAgIGZpbGVUeXBlOiBpbnB1dE1lZGlhLmNvbnRlbnQuY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL3BkZicKICAgICAgICB9OwogICAgICAgIC8vIENhbGwgbGFuZzJmaGlyL2RvY3VtZW50IGVuZHBvaW50CiAgICAgICAgY29uc3QgZG9jdW1lbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFBIRU5PTUxfQVBJX1VSTCArICcvbGFuZzJmaGlyL2RvY3VtZW50JywgewogICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZG9jdW1lbnRSZXF1ZXN0KSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YmVhcmVyVG9rZW59YCwKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgIH0sCiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjb25uZWN0IHRvIFBoZW5vTUwgZG9jdW1lbnQgQVBJOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coJ0RvY3VtZW50IEFQSSByZXNwb25zZSBzdGF0dXM6JywgZG9jdW1lbnRSZXNwb25zZS5zdGF0dXMpOwogICAgICAgIGlmICghZG9jdW1lbnRSZXNwb25zZS5vaykgewogICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBkb2N1bWVudFJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnTm8gZXJyb3IgZGV0YWlscyBhdmFpbGFibGUnKTsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCBwcm9jZXNzaW5nIGZhaWxlZDogJHtkb2N1bWVudFJlc3BvbnNlLnN0YXR1c30gJHtkb2N1bWVudFJlc3BvbnNlLnN0YXR1c1RleHR9IC0gJHtlcnJvclRleHR9YCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGdlbmVyYXRlZFJlc291cmNlID0gYXdhaXQgZG9jdW1lbnRSZXNwb25zZS5qc29uKCkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBkb2N1bWVudCByZXNwb25zZTogJHtlcnJvci5tZXNzYWdlfWApOwogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgcHJvY2Vzc2VkIGRvY3VtZW50LiBSZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShnZW5lcmF0ZWRSZXNvdXJjZSwgbnVsbCwgMikpOwogICAgICAgIHJldHVybiBnZW5lcmF0ZWRSZXNvdXJjZTsgLy8gCiAgICB9CiAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igd2l0aCBhbGwgY29udGV4dCBwcmVzZXJ2ZWQKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvdCBleGVjdXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTsKICAgIH0KfQovLyMgc291cmNlTWFwcGluZ1VSTD1sYW5nMmZoaXItZG9jdW1lbnQuanMubWFw"
      }
    },
    {
      "request": {
        "url": "$bot-lang2fhir-document-reference",
        "method": "PUT"
      },
      "resource": {
        "resourceType": "Bot",
        "id": "$bot-lang2fhir-document-id",
        "name": "lang2fhir-document",
        "runtimeVersion": "awslambda",
        "sourceCode": {
          "contentType": "text/typescript",
          "url": "urn:uuid:8a47c24a-a916-421f-a32e-3817aa3445d9"
        },
        "executableCode": {
          "contentType": "text/javascript",
          "url": "urn:uuid:e774f040-e3b7-4885-b1cf-f7703cdf1436"
        }
      }
    }
  ]
}